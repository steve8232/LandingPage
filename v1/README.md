# v1 Template System

## Architecture Overview

The v1 template system is a **non-destructive overlay** on top of the existing legacy
landing page generator. Legacy templates continue to work exactly as before — the v1
system runs alongside them without modifying any legacy code.

### Key Principles

1. **Spec-Driven Templates**
   Every v1 template is defined by a declarative JSON spec (`/v1/specs/`).
   The spec declares the template's category, goal, theme, sections, form fields,
   and metadata. There is no imperative template code — the spec *is* the template.

2. **Reusable Section Library**
   Sections (Hero, Testimonials, CTA, etc.) are standalone render functions that
   accept props and return HTML. They live in `/v1/sections/` and are composed
   together by the spec's `sections` array. Adding a new section type is a single
   file addition.

3. **Theme + Token System**
   Design tokens (spacing, typography, color semantics) are defined in CSS custom
   properties (`/v1/themes/tokens.css`). Theme files override these variables to
   create distinct visual identities. All v1 styles are namespaced under
   `<div class="v1-page">` so they never collide with legacy CSS.

4. **Composer Renders Specs → HTML**
   `composeV1Template(templateId)` loads a spec, validates it, loops through its
   sections, renders each one, and wraps the result in a full HTML document with
   the correct theme injected. Output is a self-contained HTML string.

5. **Thumbnails From Real HTML**
   Gallery thumbnails are generated by screenshotting the actual composed HTML
   output using Playwright — not from mockups or placeholders. This guarantees
   the gallery always matches reality.

6. **Legacy System Untouched**
   All v1 logic lives under `/v1/`. The legacy template system (`/src/lib/templates.ts`,
   `/src/lib/generateHtml.ts`, etc.) is never modified. An adapter layer detects
   whether a templateId belongs to v1 and routes accordingly.

### Directory Layout

```
/v1
  /specs              ← Template spec schemas & individual specs
  /sections           ← Reusable section render functions
  /themes             ← tokens.css + theme override files
  /assets/placeholders← Placeholder images for previews
  /composer           ← composeV1Template() and helpers
  /preview            ← Preview builder scripts
  README.md           ← This file

/prompts/migration-v1 ← Prompt templates for migrating legacy → v1
/gallery              ← Generated thumbnail PNGs
/dist/previews        ← Built static HTML previews
```

